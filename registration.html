<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
	<link href="/dist/api/style/main.css" rel="stylesheet" />
	<title>Registration</title>
</head>
<body>
<header class="header main-shadow">
    <nav id="siteNav" class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="white" class="bi bi-list" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/>
                </svg>
            </button>
            <div class="brand">
                <a class="navbar-brand" href="https://3playpay.com/" target="_blank">
                    <img src="/dist/api/images/TPP_logo_white_icon.png" alt="Triple Play Pay" width="70" height="70">
                    <span class="d-none d-sm-inline"><span class="d-none d-sm-inline"><b>Triple Play Pay</b> | Documentation</span></span>
                </a>
            </div>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="nav nav-underline">
                    <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/index.html">Getting Started</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Developers</a>
                        <ul class="dropdown-menu" data-bs-display="responsive">
                            <li><a class="dropdown-item" href="/iframe.html">Iframe Documentation
                                <br>
                                <sup>Integrate & customize the iframe</sup>
                            </a>
                            </li>
                            <li><a class="dropdown-item" href="/api.html">API Documentation
                                <br>
                                <sup>Leverage the API in your platform</sup>
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item active" href="/certificate.html">Integration Certification
                                <br>
                                <sup>Pass the certification to go live</sup>
                            </a></li>
                        </ul>
                        </li>
                        <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">ISVs & Agents</a>
                        <ul class="dropdown-menu" data-bs-display="responsive">
                            <li><a class="dropdown-item" href="/partners.html">Portal Guide
                                <br>
                                <sup>Utilize the TPP portal</sup>
                            </a></li>
                            <li><a class="dropdown-item" href="/paymentmethods.html">Payment Methods
                                <br>
                                <sup>Discover available payment options</sup>
                            </a></li>
                            <li>
                            <a href="https://3playpay.com/partnership/"  type="button" class="dropdown-item" id="getStarted" target="_blank">Apply for Partnership
                                <br>
                                <sup>Enroll as an ISV or Agent</sup>
                            </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/certificate.html">Integration Certification
                                <br>
                                <sup>Pass the certification to go live</sup>
                            </a></li>
                        </ul>
                        </li>
                        <li class="nav-item log-in">
                        <button href="https://3playpay.com/partnership/" type="button" class="btn btn-tertiary" id="login" target="_blank">Portal Log-In</button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</header>
<div class="content mx-auto">
    <form class="needs-validation" id="registrationForm">
        <div class="card reg-card w-75 w-md-50 mx-auto main-shadow">
            <div class="card-body">
                <div class="step step-1 mx-auto w-auto px-5">
                    <h2 class="mb-4">Step 1: Developer Information</h2>
                    <div class="form-group">
                        <label for="firstName" class="reg-label">First Name</label>
                        <input type="text" class="form-control" id="firstName" placeholder="First Name" required>
                        <div class="invalid-feedback">Your full name is required.</div>
                    </div>
                    <div class="form-group">
                        <label for="lastName" class="reg-label">Last Name</label>
                        <input type="text" class="form-control" id="lastName" placeholder="Last Name" required>
                        <div class="invalid-feedback">Your full name is required.</div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="reg-label">Work Email Address</label>
                        <input type="email" class="form-control" id="email" placeholder="Work Email Address" required>
                        <div class="invalid-feedback">Your work email address is required.</div>
                    </div>
                    <div class="form-group">
                        <label for="company" class="reg-label">Company Name</label>
                        <input type="text" class="form-control" id="company" placeholder="Company Name" required>
                        <div class="invalid-feedback">Your company name is required.</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card reg-card w-75 w-md-50 mx-auto main-shadow mt-5">
            <div class="card-body">
                <div class="step step-2 mx-auto w-auto px-5">
                    <h2 class="mb-4">Step 2: Integration Requirements</h2>
                    <p>Select all features that you will need for your application:</p>
                    <div class="form-group">
                        <label>Required to Complete:</label>
                        <ul>
                            <li>Retrieving Transaction Reports</li>
                            <li>Retrieving Receipts</li>
                            <li>Refunding Transactions</li>
                            <li>Enrolling Merchants</li>
                        </ul>
                    </div>
                    <div class="form-group">
                        <label>Iframe (select all features that you will use via the iframe):</label>
                        <ul style="list-style-type: none;">
                            <li><input type="checkbox" name="iframeCardCharge" value="ChargeCard" id="iframeCardCharge"> Charge Cards</li>
                            <li><input type="checkbox" name="iframeAchCharge" value="ChargeACH" id="iframeAchCharge"> Charge ACH</li>
                            <li><input type="checkbox" name="iframeCryptoCharge" value="ChargeCrypto" id="iframeCryptoCharge"> Charge with Crypto</li>
                            <li><input type="checkbox" name="iframeCardTokenize" value="TokenizeCard" id="iframeCardTokenize"> Tokenize Cards (Save a card for a future transaction)</li>
                            <li><input type="checkbox" name="iframeAchTokenize" value="TokenizeACH" id="iframeAchTokenize"> Tokenize ACH (Save an ACH for a future transaction)</li>
                            <li><input type="checkbox" name="iframeSubs" value="BeginSubscription" id="iframeSubs"> Begin and Cancel Subscriptions</li>
                            <li><input type="checkbox" name="iframeMeta" value="IncludeMetaData" id="iframeMeta"> Include Meta Data (such as Patient or Customer ID or Account Number)</li>
                            <li><input type="checkbox" name="iframeAuthSet" value="AuthorizeSettleCard" id="iframeAuthSet"> Authorize and Settle a Card</li>
                        </ul>
                    </div>
                    <div class="form-group">
                        <label>Terminal (select all features that you will use via terminals):</label>
                        <ul style="list-style-type: none;">
                            <li><input type="checkbox" name="terminalCharge" value="Charge" id="terminalCharge"> Charge</li>
                            <li><input type="checkbox" name="terminalAuthSet" value="AuthorizeSettle" id="terminalAuthSet"> Authorize and Settle</li>
                            <li><input type="checkbox" name="terminalSignature" value="Signature" id="terminalSignature"> Signature</li>
                        </ul>
                    </div>
                    <div class="form-group">
                        <label>API  (select all features that you will use via direct API calls):</label>
                        <ul style="list-style-type: none;">
                            <li><input type="checkbox" name="apiCardCharge" value="ChargeCard" id="apiCardCharge"> Charge Cards</li>
                            <li><input type="checkbox" name="apiAchCharge" value="ChargeACH" id="apiAchCharge"> Charge ACH</li>
                            <li><input type="checkbox" name="apiAuthSet" value="AuthorizeSettle" id="apiAuthSet"> Authorize and Settle</li>
                            <li><input type="checkbox" name="apiSubs" value="BeginSubscription" id="apiSubs"> Begin and Cancel Subscriptions</li>
                            <li><input type="checkbox" name="apiCardTokenize" value="TokenizeCard" id="apiCardTokenize"> Tokenize Cards (Save a card for a future transaction)</li>
                            <li><input type="checkbox" name="apiAchTokenize" value="TokenizeACH" id="apiAchTokenize"> Tokenize ACH (Save an ACH for a future transaction)</li>
                        </ul>
                    </div>
                </div>                
            </div>
        </div>
        <div class="d-flex flex-column justify-content-center align-items-center">
            <p class="mt-3 mb-0 d-none" id="errorDiv">Please make sure you have selected your integration needs.</p>
            <button type="submit" class="btn btn-primary complete-step">Submit</button>
        </div>
    </form>
    <div class="confirmation">
        <h2 class="mb-4">Thank You</h2>
        <div class="text-success mb-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" fill="currentColor" class="bi bi-check-circle" viewBox="0 0 16 16">
                <path d="M12.186 3.186a.5.5 0 0 1 .628.628l-5 10a.5.5 0 0 1-.8.07l-3.5-3.5a.5.5 0 1 1 .708-.708L6 12.293l4.186-8.187z"/>
            </svg>
        </div>
        <p class="mb-0">Your registration has been completed. Check your inbox for further instructions.</p>
    </div>
</div>

<script 
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" 
    crossorigin="anonymous">
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("registrationForm");
    const confirmationDiv = document.querySelector(".confirmation");

    form.addEventListener("submit", function (e) {
        e.preventDefault();

        // Object to store the instructions based on checkbox IDs
        const emailContent = {
            subject: "Development Certification Instructions",
            instructions: [],
        };

        // Instructions for each checkbox
        const checkboxInstructions = {
            iframeCardCharge: "Iframe: Charge a card for $4.23. Refund the transaction for $2.11.",
            iframeAchCharge: "Iframe: Charge an ACH account for $5.26. Refund the transaction for $2.12.",
            iframeCryptoCharge: "Iframe: There are currently no sandbox simulations for Crypto.",
            iframeCardTokenize: "Iframe: Tokenize a card without charging it. Retrieve the token. Charge that tokenized card $7.23.",
            iframeAchTokenize: "Iframe: Tokenize a bank account without charging it. Retrieve the token. Charge that tokenized account $7.24.",
            iframeSubs: "Iframe: Set a subscription that will start 30 days from the date of set-up and be charged monthly. Set up another subscription that will begin today and charge the card weekly. Cancel the weekly subscription. Refund half of the payment that was made.",
            iframeMeta: "Iframe: Include an invoice number of #12345 with a card transaction.",
            iframeAuthSet: "Iframe: Authorize a card for $50. Settle the authorized card for $23.22.",
            terminalCharge: "Terminal: Charge a card for $4.24. Refund the transaction for $2.13.",
            terminalAuthSet: "Terminal: Authorize a card for $30. Settle the card for $20.22. Refund the transaction for $2.14.",
            terminalSignature: "Terminal: Retrieve a signature with a charge of $40.99.",
            apiCardCharge: "API: Charge a card for $4.25. Refund the transaction for $2.21.",
            apiAchCharge: "API: Charge an ACH account for $5.27. Refund the transaction for $2.18.",
            apiAuthSet: "API: Authorize a card for $60. Settle the authorized card for $25.99. Refund the transaction for $2.29.",
            apiSubs: "API: Set a subscription that will start 15 days from the date of set-up and be charged monthly. Set up another subscription that will begin today and charge the card weekly. Cancel the weekly subscription. Refund half of the payment that was made.",
            apiCardTokenize: "API: Tokenize a card without charging it. Retrieve the token. Charge that tokenized card $7.25.",
            apiAchTokenize: "API: Tokenize a bank account without charging it. Retrieve the token. Charge that tokenized account $7.26.",
        };

        // Loop through the checkboxes
        for (const checkboxId in checkboxInstructions) {
            const checkbox = document.getElementById(checkboxId);
            if (checkbox.checked) {
                const checkboxInstruction = checkboxInstructions[checkboxId];
                emailContent.instructions.push(checkboxInstruction);
            }
        }

        if (form.checkValidity() && emailContent.instructions.length > 0) {
            // Call sendEmail function with API call
            sendEmail(emailContent);

            form.style.display = "none";
            confirmationDiv.style.display = "block";
            form.classList.add('was-validated');
        } else {
            event.preventDefault();
            event.stopPropagation();
            const errorDiv = document.getElementById("errorDiv");
            errorDiv.classList.remove("d-none");
        }
    });

    function sendEmail(emailContent) {
        const to = `devteam@tripleplaypay.com,` + document.getElementById('email').value
        const emailBody = emailContent.instructions.join('<br>')
        const welcome = encodeURIComponent(`Hello and welcome to Triple Play Pay's development certificate process.<br><br>
        Below are the tests that need to be submitted before you will receive a certificate of readiness and ability to use a live API key. 
        To find your account API key, log in to <a href="https://sandbox.tripleplaypay.com" target="_blank">sandbox</a>, go to "Accounts," 
        and open the account that you wish to retrieve the API key for. In the sandbox environment, no sensitive data is saved, 
        and dummy data and card details can be used. It is a true practice environment. Once you are ready, complete the tests below. 
        Upon completion, please email devteam@tripleplaypay.com.<br><br>`)
        const required = encodeURIComponent(`API: Retrieve your report for the past week of transactions.<br>API: Retrieve a receipt for a transaction that you have completed.<br>API: Fully refund a transaction that you have submitted.<br>API (or contact link, if provided): Enroll a merchant with any dummy details that you choose.<br>`)
        const details = encodeURIComponent(`<br><br>Lead Developer: ` + document.getElementById('firstName').value + ` ` + document.getElementById('lastName').value + `<br>Email: ` + document.getElementById('email').value + `<br>Company: ` + document.getElementById('company').value)
        const contact = encodeURIComponent(`<br><br>Please reach out to devteam@tripleplaypay.com with questions.`)

        fetch(`https://tripleplaypay.com/api/email?apikey=4ed74ef8-94ba-4f63-80f5-79aa2dc08a93&to=${to}&subject=${emailContent.subject}&body=${welcome}${emailBody}${required}${details}${contact}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error(`Failed to fetch: ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => console.log(data))
            .catch(error => console.error(error.message));
    }
});
</script>
</body>
</html>